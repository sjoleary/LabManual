---

title: "Lab Manual Conservation Biology Fall 2020"
subtitle: "Conservation Biology Fall 2020"
author: "Shannon J. O'Leary"
date: "`r Sys.Date()`"
knit: "bookdown::preview_chapter"
output:
  msmbstyle::msmb_html_book:
    highlight: tango
    toc: TRUE
    toc_depth: 1
    split_by: chapter
    split_bib: no
    margin_references: FALSE
    css: msmb.css
bibliography: skeleton.bib
link-citations: yes

---

```{r setup, include=FALSE}

library(msmbstyle)
# invalidate cache when the tufte version changes
knitr::opts_chunk$set(tidy = FALSE, cache.extra = packageVersion('msmbstyle'))
options(htmltools.dir.version = FALSE)

```

# Installing R/Rstudio

**Learning Objectives**

After completing this tutorial you should

* be able to download and install `R` and `Rstudio` on your laptop
* be able to install `Rtools` & `devtools` to be able to compile `R packages` from source (Windows).
* understand the main use for each of the four main panes in the `Rstudio` GUI.
* understand what a package is in `R` and how to install them.
* be able to set up a well structured project.
* understand what a working directory is and how to set up an R project.


## Install & Set up R and Rstudio on your computer

### Windows

**Install R**

* Download most recent version of R for Windows [here](https://cran.r-project.org/bin/windows/base/release.htm).
* Run the `.exe` file that was downloaded and follow instructions in the set-up wizard.


**Install Rtools**

* Download Rtools [here](https://cran.r-project.org/bin/windows/Rtools/rtools40-x86_64.exe).
* Run the downloaded `.exe` file that was download and follow the instructions in the set-up wizard.


**Install Rstudio**

* Go to Rstudio download (page)[http://www.rstudio.com/ide/download/desktop].
* Scroll down to select the `Rstudio` current version for Windows XP/Vista/7/8/10.
* Run the `.exe` file that was downloaded and follow instructions in the set-up wizard.


**Finish setting up Rtools**

* Open `Rstudio` to make sure you aren't getting any error messages
* Put `Rtools` in your path by typing `writeLines('PATH="${RTOOLS40_HOME}\\usr\\bin;${PATH}"', con = "~/.Renviron")` in the console window.
* Install the `devtools` package by typing `install.packages("devtools")` in the console.


### Mac OS X

**Download & install R**

* Go to (CRAN)[http://cran.r-project.org/], select `Download R for (Mac) OS X`.
* Download the `.pkg` file for your OS X version.
* Run the downloaded file to install `R`.

**Download & install Rstudio**

* Go to Rstudio download (page)[http://www.rstudio.com/ide/download/desktop].
* Scroll down to select the `Rstudio` current version for Mac OS X.
* Run the `.exe` file that was downloaded and follow instructions in the set-up wizard.


## Get to know Rstudio

`Rstudio` is an Integrated Development Environment (IDE) that you can use to write code, navigate files, inspect objects etc. The advantage of using an IDE is that you have access to shortcuts, visual cues, troubleshooting, navigation, and autocomplete help.


### GUI Layout

Open `Rstudio` and identify the four panes in the interface (default layout).

1. **Editor** (top left): edit scripts/other documents, code can be sent directly to the console.
2. **R console** (bottom left): Run code either by directly typing the code or sending it from the editor pane.
3. **Environment/history** (top right): Contains variables/objects as you create them & full history of functions/commands that have been run.
4. **files/plots/packages/help/viewer** (bottom right): Different tabs in this pane wil let you explore files on your computer, view plots, loaded packages, and read manual pages for various functions.

The panes can be customized (`Rstudio -> Preferences -> Pane Layout`) and you can move/resize them using your mouse.


### Interacting with R in Rstudio

Think of `R` as a language that allows you to give your computer precise instructions (code) to follow.

* **Commands** are the instructions we are giving the computer, usually as a series of functions.
* **Executing** code or a program means you are telling the computer to run it.

There are three main ways to interact with `R` - directly using console, script files (`*.R`), or code chunks embedded in R markdown files (`*.Rmd`).

The console is where you execute code and see the results those commands. You can type your code directly into the console and hit `Enter` to execute it. You can review those commands in the history pane (or by saving the history) but if you close the session and don't save the history to file those commands will be forgotten.

By contrast, writing your code in the script editor either as a standard script or as a code chunk in an Rmarkdown file allows you to have a reproducible workflow (future you and other collaborators will thank you).

Executing an entire script, a code chunk, or individual functions from a script will run them in the console.

* `Ctrl` + `Enter` will execute commands directly from the script editor. You can use this to run the line of code your cursor is currently in in the script editor or you can highlight a series of lines to execute.
* If you are using an Rmarkdown file you can execute an entire code chunk by pressing the green arrow in the top right corner.

If the console is ready for you to execute commands you should see a `>` prompt. If you e.g. forget a `)` you will see a `+` prompy - `R` is telling you that it is expecting further code. When this happens and you don't know what you are missing (usually it is an unmatched quotation or parenthesis), make sure your cursor is in the console and hit the `Esc` key.

### Customize Rstudio



## Installing and using packages in R

### Install a package

Think of R packages as tool kit, a packages is comprised of a set of functions (tools) to perform specific tasks. `R` comes with a set of packages already installed that gives you base `R` functions. For other tasks we will need additional packages. A central group of packages for data wrangling and processing form the [tidyverse](https://www.tidyverse.org/), described as "... an opinionated collection of R packages designed for data science. All packages share an underlying design philosophy, grammar, and data structures.".

^[Most `R` packages are found in the [CRAN repository](https://cran.r-project.org/) and on [Bioconducter](https://www.bioconductor.org/), developmental packages are available on [github](https://github.com/).]

When you install packages they will be downloaded and installed onto your computer. Determine what your default path is using `.libPaths()` and change if necessary.

The easiest way to install packages is to use the `install.packages()` function. Use the `R` console to install some libraries to get us started (we will install other libraries as needed for other labs).

^[Using `#` in an R script allows you to insert comments that are ignored by R when executing your code. Use comments to document your code, future you will thank you!]

```{r eval=FALSE, echo=TRUE}

# install the rmarkdown package
install.packages("rmarkdown")

# install central packages in the tidyverse
install.packages("tidyverse")

# install plyr
install.packages("plyr")

# install ggthemes
install.packages(ggthemes)

```


## Project organization 101

A key component to doing data analysis is organizing your **working directory** which will contain your data, scripts, Rmarkdowns, results, figures, and other output. Keeping this well organized will help you establish a reproducible workflow, collaborate well, and share your results.

### Organizing your files and directories

For each project we will set up a project directory (we'll use this term interchangeably with working directory and research compendium) with the following set of subdirectories:


### A note on Naming things

Naming conventions for files, subdirectories etc should conform to the following key principles:

* **Human readable**: keep it short but self-explanatory.
* **Machine readable**: don't use special characters of spaces.
* **Sortable**: standardize components of the filenames to make it possible to sort files and find what you are looking for.


### Set up your project directory using Rprojects

Create a project directory
^[Yes, a directory is essentially a folder, however when using the term directory we are considering the relationship between a folder and it's full path.]
(e.g. `IntroR`) on your computer, within that directory create subdirectories `data`, `results`, `scr`.

Now, we are going to create an `R project` within this directory.

